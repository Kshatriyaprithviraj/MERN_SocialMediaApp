(()=>{"use strict";var e={237:(e,r,o)=>{var t;o.d(r,{Z:()=>i}),e=o.hmd(e),(t="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&t(e),"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;const a={env:"production",port:process.env.PORT||3e3,jwtSecret:process.env.JWT_SECRET||"YOUR_secret_key",mongoUri:process.env.MONGODB_URI||process.env.MONGO_HOST||"mongodb://"+(process.env.IP||"localhost")+":"+(process.env.MONGO_PORT||"27017")+"/mernproject"},s=a,i=s;var l,d;(l="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(l.register(a,"config","/home/prithvi/Desktop/Projects/socialize/config/config.js"),l.register(s,"default","/home/prithvi/Desktop/Projects/socialize/config/config.js")),(d="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&d(e)},949:(e,r,o)=>{o.d(r,{Z:()=>v});var t=o(630);const a=require("jsonwebtoken");var s=o.n(a);const i=require("express-jwt");var l,d=o.n(i),n=o(237);e=o.hmd(e),(l="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&l(e),"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;const c=async(e,r)=>{try{let o=await t.Z.findOne({email:e.body.email});if(!o)return r.status("401").json({error:"User not found"});if(!o.authenticate(e.body.password))return r.status("401").send({error:"Email and passwords don't match."});const a=s().sign({_id:o._id},n.Z.jwtSecret);return r.cookie("t",a,{expire:new Date+9999}),r.json({token:a,user:{_id:o._id,name:o.name,email:o.email}})}catch(e){return console.log(e),r.status("401").json({error:"Could not sign in ! :("})}},u=(e,r)=>(r.clearCookie("t"),r.status("200").json({message:"signed out"})),p=d()({secret:n.Z.jwtSecret,userProperty:"auth",algorithms:["HS256"]}),h=(e,r,o)=>{if(!e.profile||!e.auth||e.profile._id!=e.auth._id)return r.status("403").json({error:"User isn't authorized !"});o()},f={signin:c,signout:u,requireSignin:p,hasAuthorization:h},v=f;var g,m;(g="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(g.register(c,"signin","/home/prithvi/Desktop/Projects/socialize/server/controllers/auth.controller.js"),g.register(u,"signout","/home/prithvi/Desktop/Projects/socialize/server/controllers/auth.controller.js"),g.register(p,"requireSignin","/home/prithvi/Desktop/Projects/socialize/server/controllers/auth.controller.js"),g.register(h,"hasAuthorization","/home/prithvi/Desktop/Projects/socialize/server/controllers/auth.controller.js"),g.register(f,"default","/home/prithvi/Desktop/Projects/socialize/server/controllers/auth.controller.js")),(m="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&m(e)},345:(e,r,o)=>{o.d(r,{Z:()=>v});var t=o(630);const a=require("lodash/extend");var s,i=o.n(a),l=o(22);e=o.hmd(e),(s="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&s(e),"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;const d=async(e,r)=>{const o=new t.Z(e.body);try{return await o.save(),r.status(200).json({message:"Successfully signed up."})}catch(e){return r.status(400).json({error:l.Z.getErrorMessage(e)})}},n=async(e,r,o,a)=>{try{let s=await t.Z.findById(a);if(!s)return r.status("400").json({error:"User not found"});e.profile=s,o()}catch(e){return r.status("400").json({error:"Couldn't retrieve the user"})}},c=(e,r)=>(e.profile.hashed_password=void 0,e.profile.salt=void 0,r.json(e.profile)),u=async(e,r)=>{try{let e=await t.Z.find().select("name email updated created");r.json(e)}catch(e){return r.status(400).json({error:l.Z.getErrorMessage(e)})}},p=async(e,r)=>{try{let o=e.profile;o=i()(o,e.body),o.updated=Date.now(),await o.save(),o.hashed_password=void 0,o.salt=void 0,r.json(o)}catch(e){return r.status(400).json({error:l.Z.getErrorMessage(e)})}},h=async(e,r)=>{try{e.profile;let o=await t.Z.remove();o.hashed_password=void 0,o.salt=void 0,r.json(o)}catch(e){return r.status(400).json({error:l.Z.getErrorMessage(e)})}},f={create:d,userById:n,read:c,list:u,remove:h,update:p},v=f;var g,m;(g="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(g.register(d,"create","/home/prithvi/Desktop/Projects/socialize/server/controllers/user.controller.js"),g.register(n,"userById","/home/prithvi/Desktop/Projects/socialize/server/controllers/user.controller.js"),g.register(c,"read","/home/prithvi/Desktop/Projects/socialize/server/controllers/user.controller.js"),g.register(u,"list","/home/prithvi/Desktop/Projects/socialize/server/controllers/user.controller.js"),g.register(p,"update","/home/prithvi/Desktop/Projects/socialize/server/controllers/user.controller.js"),g.register(h,"remove","/home/prithvi/Desktop/Projects/socialize/server/controllers/user.controller.js"),g.register(f,"default","/home/prithvi/Desktop/Projects/socialize/server/controllers/user.controller.js")),(m="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&m(e)},898:(e,r,o)=>{o.d(r,{Z:()=>G});var t=o(127),a=o.n(t);const s=require("path");var i=o.n(s);const l=require("cookie-parser");var d=o.n(l);const n=require("compression");var c=o.n(n);const u=require("cors");var p=o.n(u);const h=require("helmet");var f,v=o.n(h),g=o(281),m=o(816),b=o(504);e=o.hmd(e),(f="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&f(e),"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;const y=a()(),j=process.cwd();y.use("/dist",a().static(i().join(j,"dist"))),y.use(a().json()),y.use(a().urlencoded({extended:!0})),y.use(d()()),y.use(c()()),y.use(v()()),y.use(p()()),y.use("/",m.Z),y.use("/",b.Z),y.get("/",((e,r)=>{r.status(200).send((0,g.Z)())})),y.use(((e,r,o,t)=>{"UnauthorizedError"===e.name?o.status(401).json({error:e.name+": "+e.message}):e&&(o.status(400).json({error:e.name+": "+e.message}),console.log(e))}));const H=y,G=H;var L,w;(L="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(L.register(y,"app","/home/prithvi/Desktop/Projects/socialize/server/express.js"),L.register(j,"CURRENT_WORKING_DIR","/home/prithvi/Desktop/Projects/socialize/server/express.js"),L.register(H,"default","/home/prithvi/Desktop/Projects/socialize/server/express.js")),(w="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&w(e)},22:(e,r,o)=>{var t;o.d(r,{Z:()=>l}),e=o.hmd(e),(t="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&t(e),"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;const a=e=>{let r;try{let o=e.message.substring(e.message.lastIndexOf(".$")+2,e.message.lastIndexOf("_1"));r=o.charAt(0).toUpperCase()+o.slice(1)+"already exists !"}catch(e){r="Unique field already exists !"}return r},s=e=>{let r="";if(e.code)switch(e.code){case 11e3:case 11001:r=a(e);break;default:r="Something went wrong !"}else for(let o in e.errors)e.errors[o].message&&(r=e.errors[o].message);return r},i={getErrorMessage:s},l=i;var d,n;(d="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(d.register(a,"getUniqueErrorMessage","/home/prithvi/Desktop/Projects/socialize/server/helpers/dbErrorHandler.js"),d.register(s,"getErrorMessage","/home/prithvi/Desktop/Projects/socialize/server/helpers/dbErrorHandler.js"),d.register(i,"default","/home/prithvi/Desktop/Projects/socialize/server/helpers/dbErrorHandler.js")),(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&n(e)},630:(e,r,o)=>{o.d(r,{Z:()=>c});var t=o(619),a=o.n(t);const s=require("crypto");var i,l=o.n(s);e=o.hmd(e),(i="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&i(e),"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;const d=new(a().Schema)({name:{type:String,trim:!0,required:"Name is required"},email:{type:String,trim:!0,unique:"Email already exists",match:[/.+\@.+\..+/,"Please fill a valid email address"],required:"Email is required !"},hashed_password:{type:String,required:"Password is required !"},salt:String,updated:Date,created:{type:Date,default:Date.now}});d.virtual("password").set((function(e){this._password=e,this.salt=this.makeSalt(),this.hashed_password=this.encryptPassword(e)})).get((function(){return this._password})),d.path("hashed_password").validate((function(e){this._password&&this._password.length<6&&this.invalidate("password","Password must be atleast 6 characters."),this.isNew&&!this._password&&this.invalidate("password","Password is required.")}),null),d.methods={authenticate:function(e){return this.encryptPassword(e)===this.hashed_password},encryptPassword:function(e){if(!e)return"";try{return l().createHmac("sha1",this.salt).update(e).digest("hex")}catch(e){return""}},makeSalt:function(){return Math.round((new Date).valueOf()*Math.random())+""}};const n=a().model("User",d),c=n;var u,p;(u="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(u.register(d,"UserSchema","/home/prithvi/Desktop/Projects/socialize/server/models/user.model.js"),u.register(n,"default","/home/prithvi/Desktop/Projects/socialize/server/models/user.model.js")),(p="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&p(e)},504:(e,r,o)=>{o.d(r,{Z:()=>n});var t,a=o(127),s=o.n(a),i=o(949);e=o.hmd(e),(t="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&t(e),"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;const l=s().Router();l.route("/auth/signin").post(i.Z.signin),l.route("/auth/signout").get(i.Z.signout);const d=l,n=d;var c,u;(c="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(c.register(l,"router","/home/prithvi/Desktop/Projects/socialize/server/routes/auth.routes.js"),c.register(d,"default","/home/prithvi/Desktop/Projects/socialize/server/routes/auth.routes.js")),(u="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&u(e)},816:(e,r,o)=>{o.d(r,{Z:()=>c});var t,a=o(127),s=o.n(a),i=o(345),l=o(949);e=o.hmd(e),(t="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&t(e),"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;const d=s().Router();d.route("/api/users").get(i.Z.list).post(i.Z.create),d.route("/api/users/:userId").get(l.Z.requireSignin,i.Z.read).put(l.Z.requireSignin,l.Z.hasAuthorization,i.Z.update).delete(l.Z.requireSignin,l.Z.hasAuthorization,i.Z.remove),d.param("userId",i.Z.userById);const n=d,c=n;var u,p;(u="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(u.register(d,"router","/home/prithvi/Desktop/Projects/socialize/server/routes/user.routes.js"),u.register(n,"default","/home/prithvi/Desktop/Projects/socialize/server/routes/user.routes.js")),(p="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&p(e)},281:(e,r,o)=>{var t;o.d(r,{Z:()=>s}),e=o.hmd(e),(t="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&t(e),"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;const a=()=>'\n        <!DOCYPE html>\n        <html lang="en">\n            <head>\n                <title>Socialize</title>\n                <link rel="preconnect" href="https://fonts.gstatic.com">\n                <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300&display=swap" \n                rel="stylesheet">\n                <link href="https://fonts.googleapis.com/icon?family=Material+Icons"\n                rel="stylesheet">\n            </head>\n            <body>\n                <div id="root">\n                    This is a simple social media app using MERN stack.\n                </div>\n                <script type="text/javascript" src="/dist/bundle.js"><\/script>\n            </body>\n        </html>\n    ',s=a;var i,l;(i="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&i.register(a,"default","/home/prithvi/Desktop/Projects/socialize/template.js"),(l="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&l(e)},127:e=>{e.exports=require("express")},619:e=>{e.exports=require("mongoose")}},r={};function o(t){var a=r[t];if(void 0!==a)return a.exports;var s=r[t]={id:t,loaded:!1,exports:{}};return e[t](s,s.exports,o),s.loaded=!0,s.exports}o.n=e=>{var r=e&&e.__esModule?()=>e.default:()=>e;return o.d(r,{a:r}),r},o.d=(e,r)=>{for(var t in r)o.o(r,t)&&!o.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:r[t]})},o.hmd=e=>((e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e),o.o=(e,r)=>Object.prototype.hasOwnProperty.call(e,r),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var t={};(()=>{o.r(t);var e=o(237),r=o(898),a=o(619),s=o.n(a);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature,s().Promise=global.Promise,s().connect(e.Z.mongoUri,{useNewUrlParser:!0,useCreateIndex:!0,useUnifiedTopology:!0}),s().connection.on("error",(()=>{throw new Error(`unable to connect to database: ${e.Z.mongoUri}`)})),r.Z.listen(e.Z.port,(r=>{r&&console.log(r),console.log("Server started successfully and listening on port "+e.Z.port+".")}))})(),module.exports=t})();